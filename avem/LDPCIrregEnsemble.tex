%LDPC %Ensemble
\begin{tikzpicture}
\def\horzgap{1.25in}; %Horizontal gap between nodes/levels
\def \gapVN{0.4in}; %vertical gap between nodes
\def \gapCN{0.4in}; %Horizontal gap between nodes

\def \textoffs{0.12in}; %Offset for writing text above a node
\def\nodewidth{0.1in};
\def\edgewidth{3pt};
\def\ext{0.2in};

\def \n {8};
\def\ldeg{3};
\def \m {4};
\def\rdeg{6};
\def\langle{40};%120 degrees/3
\def\langle{20};%120 degrees/6

\tikzstyle{check} = [rectangle, draw, text centered, fill=red!80!black,
                          minimum height=\nodewidth, minimum width=\nodewidth]
\tikzstyle{bit} = [circle, draw, text centered, thick,fill=black,
                          radius=0.5*\nodewidth]
\tikzstyle{edgesock} = [circle, inner sep=0mm, minimum size=\edgewidth,draw, fill=white]                          ]
                          

%%---------------------------------------%% nL1--------------------------------------------------
  \node[bit] (vna1) at (0,0) {};
  \node[bit,below=5*\nodewidth of vna1] (vna2) {};
  \node[below=	0.5*\nodewidth of vna1] (dots1) {\Huge{\vdots}};
  \node[left=0.25*\nodewidth of dots1](text1){\Large{$nL_1$}};

\node [edgesock,right=\ext of vna1](ev1){};
\node [edgesock,right=\ext of vna2](ev2){};
\draw (vna1.east)-- (ev1.west);
\draw (vna2.east)-- (ev2.west);

\node [below left=0.5*\gapVN and \gapVN of vna2](dotline){};
\draw [thin,dashed,gray] (dotline)--+(2*\gapVN,0);
%%---------------------------------------%% nL2--------------------------------------------------
  \node[bit,below= \gapVN of vna2] (vnb1) {};
  \node[below= 0.5*\nodewidth of vnb1] (dots2) {\Huge{\vdots}};
  \node[bit,below= 5*\nodewidth of vnb1] (vnb2) {};
  \node[left=0.25*\nodewidth of dots2](text2){\Large{$nL_2$}};

\node [edgesock,above right=0.015*\ext and \ext of vnb1](ev3){};
\node [edgesock,below right=0.015*\ext and \ext of vnb1](ev4){};
\node [edgesock,above right=0.015*\ext and \ext of vnb2](ev5){};
\node [edgesock,below right=0.015*\ext and \ext of vnb2](ev6){};
\draw (vnb1.east)-- (ev3.west);
\draw (vnb1.east)-- (ev4.west);
\draw (vnb2.east)-- (ev5.west);
\draw (vnb2.east)-- (ev6.west);

\node [below left=0.5*\gapVN and \gapVN of vnb2](dotline2){};
\draw [thin,dashed,gray] (dotline2)--+(2*\gapVN,0);

%%---------------------------------------%% nLmax--------------------------------------------------
  \node[bit,below= 1.5*\gapVN of vnb2] (vnc1) {};
  \node[below= 0.5*\nodewidth of vnc1] (dots3) {\Huge{\vdots}};
  \node[bit,below= 5*\nodewidth of vnc1] (vnc2) {};
  \node[left=0.25*\nodewidth of dots3](text3){\Large{$nL_{\text{l}_{\text{max}}}$}};


\node[edgesock] at ([shift=(30:1.5*\ext)]vnc1)(ev7) {};
\node[edgesock] at ([shift=(10:1.5*\ext)]vnc1) (ev8) {};
\node[edgesock] at ([shift=(350:1.5*\ext)]vnc1)(ev9) {};
\node[edgesock] at ([shift=(330:1.5*\ext)]vnc1) (ev10) {};

\node[edgesock] at ([shift=(30:1.5*\ext)]vnc2)(ev11) {};
\node[edgesock] at ([shift=(10:1.5*\ext)]vnc2) (ev12) {};
\node[edgesock] at ([shift=(350:1.5*\ext)]vnc2)(ev13) {};
\node[edgesock] at ([shift=(330:1.5*\ext)]vnc2) (ev14) {};

\draw (vnc1.east)-- (ev7.west);
\draw (vnc1.east)-- (ev8.west);
\draw (vnc1.east)-- (ev9.west);
\draw (vnc1.east)-- (ev10.west);
\draw (vnc2.east)-- (ev11.west);
\draw (vnc2.east)-- (ev12.west);
\draw (vnc2.east)-- (ev13.west);
\draw (vnc2.east)-- (ev14.west);


%--------------------------Permutation Rect ------------------------------------------------------------------------------------------
\node[draw,minimum width=\horzgap-2*\ext,minimum height=42*\nodewidth,thick](perm) at (0.5*\horzgap,-15*\nodewidth){\Huge{$\pi$}};

%%---------------------------------------%% mR1--------------------------------------------------
  \node[check] (cna1) at (\horzgap,0) {};
  \node[check,below=5*\nodewidth of cna1] (cna2) {};
  \node[below=	0.5*\nodewidth of cna1] (dotsc1) {\Huge{\vdots}};
  \node[right=0.25*\nodewidth of dotsc1](textc1){\Large{$mR_1$}};

\node [edgesock,left=\ext of cna1](ec1){};
\node [edgesock,left=\ext of cna2](ec2){};
\draw (cna1.west)-- (ec1.east);
\draw (cna2.west)-- (ec2.east);

\node [below right=0.5*\gapVN and \gapVN of cna2](dotline3){};
\draw [thin,dashed,gray] (dotline3)--+(-2*\gapVN,0);

%%---------------------------------------%% mR2--------------------------------------------------
  \node[check,below= \gapVN of cna2] (cnb1) {};
  \node[below= 0.5*\nodewidth of cnb1] (dotsc2) {\Huge{\vdots}};
  \node[check,below= 5*\nodewidth of cnb1] (cnb2) {};
  \node[right=0.25*\nodewidth of dotsc2](textc2){\Large{$mR_2$}};

\node [edgesock,above left=0.015*\ext and \ext of cnb1](ec3){};
\node [edgesock,below left=0.015*\ext and \ext of cnb1](ec4){};
\node [edgesock,above left=0.015*\ext and \ext of cnb2](ec5){};
\node [edgesock,below left=0.015*\ext and \ext of cnb2](ec6){};
\draw (cnb1.west)-- (ec3.east);
\draw (cnb1.west)-- (ec4.east);
\draw (cnb2.west)-- (ec5.east);
\draw (cnb2.west)-- (ec6.east);

\node [below right=0.5*\gapVN and \gapVN of cnb2](dotline4){};
\draw [thin,dashed,gray] (dotline4)--+(-2*\gapVN,0);
%%---------------------------------------%% mRmax--------------------------------------------------
  \node[check,below= \gapVN of cnb2] (cnc1) {};
  \node[below= 0.5*\nodewidth of cnc1] (dotsc3) {\Huge{\vdots}};
  \node[check,below= 5*\nodewidth of cnc1] (cnc2) {};
  \node[right=0.25*\nodewidth of dotsc3](textc3){\Large{$mR_{\text{r}_{\text{max}}}$}};
  
\node[edgesock] at ([shift=(150:1.5*\ext)]cnc1)(ec7) {};
\node[edgesock] at ([shift=(170:1.5*\ext)]cnc1) (ec8) {};
\node[edgesock] at ([shift=(190:1.5*\ext)]cnc1)(ec9) {};
\node[edgesock] at ([shift=(210:1.5*\ext)]cnc1) (ec10) {};

\node[edgesock] at ([shift=(150:1.5*\ext)]cnc2)(ec11) {};
\node[edgesock] at ([shift=(170:1.5*\ext)]cnc2) (ec12) {};
\node[edgesock] at ([shift=(190:1.5*\ext)]cnc2)(ec13) {};
\node[edgesock] at ([shift=(210:1.5*\ext)]cnc2) (ec14) {};

\draw (cnc1.west)-- (ec7.east);
\draw (cnc1.west)-- (ec8.east);
\draw (cnc1.west)-- (ec9.east);
\draw (cnc1.west)-- (ec10.east);
\draw (cnc2.west)-- (ec11.east);
\draw (cnc2.west)-- (ec12.east);
\draw (cnc2.west)-- (ec13.east);
\draw (cnc2.west)-- (ec14.east);

\node [below= -0.1*\gapVN of perm] {Edge Permutation};
\end{tikzpicture}